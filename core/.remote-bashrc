set -o vi
bind -m vi-insert "\C-l":clear-screen

PS1="\u@\h($(ip -o -f inet a | awk -F'[/ ]+' '! / lo /{printf $2"/"$4" "}' | sed 's/ $//')):\w \n\t "

alias s=systemctl

alias rm="rm -i"
alias cp="cp -i"
alias mv="mv -i"

alias ..="cd .."
alias ll="ls -alF"
alias ls="ls --color=auto"
alias grep="grep --color=auto"

atw() {
  df -h --total -P -l | grep ^/dev
}

terse() {
  sed -e "s/^\s*#.*$//g;/^$/d" < $1 | vim -c "set ft=dosini" -
}

open-port() {
  iptables -A INPUT -p tcp --dport $1 -j ACCEPT
}

ssht() {
  RCL=$RCF
  ssh -t $@ "RCF=\$(mktemp); echo '$(xxd -p $RCL)' | xxd -p -r > \$RCF; RCF=\$RCF bash --rcfile \$RCF"
}

if [ -f /usr/share/bash-completion/completions/systemctl ]; then
  . /usr/share/bash-completion/completions/systemctl
  complete -F _systemctl s
fi

export TZ=Asia/Shanghai
echo "$(date -d@$(stat --printf="%Y" /proc/1) +%Y-%m-%d\ %H:%M:%S) up"
